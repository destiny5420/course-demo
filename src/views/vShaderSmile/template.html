<div id="shader-smile-main">
  <script src="./vertexshader.shader" type="x-shader/x-vertex" id="vertexshader">
    void main() {
      gl_Position = vec4(position, 1.0);
    }
  </script>
  <script src="./fragment.js" type="x-shader/x-fragment" id="fragmentshader">
    uniform vec2 u_resolution;
    uniform float u_time;

    float remap(float a, float b, float target) {
      return clamp((target - a) / (b - a), 0.0, 1.0);
    }

    float remap(float a, float b, float c, float d, float target) {
      float step1 = clamp((target - a) / (b - a), 0.0, 1.0);
      return step1 * (d-c) + c;
    }

    vec4 head(vec2 uv) {
      float distance = length(uv);
      vec4 col = vec4(0.9, 0.65, 0.1, 1.0);

      float edgeShade = remap(0.4, 0.5, distance);
      col -= edgeShade * 0.5;

      /* circle outline */
      col.rgb = mix(col.rgb, vec3(0.6, 0.3, 0.1), smoothstep(0.48, 0.5, distance));

      /* create white highlight */
      float highLight = smoothstep(0.41, 0.405, distance);
      highLight = highLight * remap(0.41, -0.1, 0.75, 0.0, uv.y);
      col.rgb = mix(col.rgb, vec3(1.0), highLight);

      col.a = smoothstep(0.5, 0.49, distance);
      return col;
    }

    vec4 smiley(vec2 uv) {
      vec4 col = vec4(0.0);

      vec4 head = head(uv);

      col = mix(col, head, head.a);
      return col;
    }

    void main() {
      vec2 uv = gl_FragCoord.xy / u_resolution.xy;
      uv -= 0.5;
      uv.x *= u_resolution.x / u_resolution.y;

      gl_FragColor = smiley(uv);
    }
  </script>
</div>
